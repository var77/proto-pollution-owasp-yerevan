<html>
    <body>
        <input id="username" placeholder="username" />
        <input type="password" id="password" placeholder="password" />
        <button onclick="login()">Login</button>

        <script>
            async function login() {
                try {
                    const username = document.getElementById('username').value;
                    const password = document.getElementById('password').value;
                    const rawResponse = await fetch('/login', {
                        method: 'POST',
                        headers: {
                            'Accept': 'application/json',
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ username, password })
                    });
                    const { token } = await rawResponse.json();
                    localStorage.setItem('x-token', token);
                    location.pathname = '/';
                    } catch (err) {
                        console.error(err);
                        alert('Login Failed');
                    }
            }
        </script>
    </body>

</html>
